whatâ€™s ACTUALLY happening (no fluff)

That square is Textualâ€™s focus highlight on a widget that:

either has no size/content

or lost its render tree

but is still focused

This is not a Help/Info bug anymore.
This is a dangling focusable widget problem.

So every time you:

open / close palette

open / close modal

switch modes

ğŸ‘‰ Textual restores focus to a widget that should not be focusable at all, and it renders as that empty blue box.

Thatâ€™s why:

removing h / i didnâ€™t fully fix it

modals â€œworkâ€ but the UI still glitches

it keeps coming back no matter how much focus juggling you do

ğŸš¨ THE REAL ROOT CAUSE

You have at least one widget that is focusable but should never be.

Common culprits (one of these is in your app):

Container or Static with can_focus=True (explicit or inherited)

A placeholder widget used for layout spacing

A hidden widget that never gets removed

A custom widget without content but focusable

A widget created before Flow Mode mounts and never destroyed

Textual then does this:

â€œoh, Iâ€™ll restore focus to the last focused widget ğŸ™‚â€

â€¦and boom ğŸ’¥ blue square.

âœ… FINAL, GUARANTEED FIX (SHIP-SAFE)
ğŸ”’ RULE: only INTENTIONAL INPUT widgets may receive focus
1ï¸âƒ£ HARD-DISABLE focus globally (do this first)

In your App class:

CSS = """
* {
    can-focus: false;
}
"""


This nukes focus from everything by default.

2ï¸âƒ£ Explicitly re-enable focus ONLY where needed

For example:

class TaskInput(Input):
    can_focus = True

class CommandPalette(Input):
    can_focus = True


Thatâ€™s it.
No Containers.
No Statics.
No placeholders.

3ï¸âƒ£ Kill the ghost widget (IMPORTANT)

Find anything like this and either delete it or make it unfocusable:

Container()
Static()
Widget()


If it exists only for layout, add:

can_focus = False


(or let the global CSS handle it)

4ï¸âƒ£ One-time safety net (optional but smart)

In on_mount of your App:

self.set_focus(None)


This ensures no zombie focus survives startup.

ğŸ§ª HOW YOU KNOW ITâ€™S FIXED

After this:

âŒ no blue square

âŒ no black boxes

âŒ no random focus jumps

ESC works clean

palette works

modals work

you can leave the app idle and it stays stable

This is the Textual nuclear option,