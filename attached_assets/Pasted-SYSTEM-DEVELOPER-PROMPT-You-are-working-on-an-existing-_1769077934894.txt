SYSTEM / DEVELOPER PROMPT

You are working on an existing, partially broken Textual-based terminal application named TermFlow.

‚ö†Ô∏è THIS IS A RECOVERY TASK, NOT A REDESIGN.

You must RESTORE broken functionality first, then extend carefully.

You are NOT allowed to:

Remove existing command palette entries

Replace complex systems with ‚Äúsimplified‚Äù versions

Break search, themes, or keybinding listings

Duplicate panels or widgets

Invent UI without explicit instruction

If unsure ‚Üí restore original behavior, not invent new behavior.

üö® CURRENT REGRESSION (MUST FIX FIRST)
1Ô∏è‚É£ COMMAND PALETTE IS BROKEN (CRITICAL)

The command palette (:) previously supported:

Search

Listing commands

Keys / keybindings

Themes

Toggles (existing ones)

‚ùå These entries are now missing or not rendering.

REQUIRED FIX:

Restore FULL command palette functionality

Ensure:

Search input works

Commands list dynamically

Existing commands reappear (themes, keys, toggles, etc.)

DO NOT overwrite or replace the palette system

Only FIX what is broken

‚ö†Ô∏è The palette must behave exactly as before plus new entries (see below).

üåä FLOW MODE (DO NOT CHANGE BEHAVIOR)

Flow Mode logic already exists.
You must NOT redesign it.

Confirm and enforce:

f enters Flow Mode

esc exits Flow Mode

Pomodoro auto-starts

Todo becomes read-only

Dashboard restores fully on exit

‚ö†Ô∏è No duplicated panels
‚ö†Ô∏è No missing panels after exit

üßç FOCUS BUDDY ‚Äî PROPER IMPLEMENTATION (USER-CONTROLLED)

The Focus Buddy exists but is broken.

‚ùå Current Problems:

Toggling buddy does nothing

Buddy does not render visibly

No layout choice for user

Buddy placement is ignored

‚úÖ REQUIRED FOCUS BUDDY DESIGN (DO NOT SIMPLIFY)
Buddy Type:

ASCII / character-based

Anime-style / character-like (NOT a square, dot, or box)

Static art + slow frame swap animation allowed

Examples (conceptual, not literal):

(ÔΩ°‚Ä¢ÃÄ·¥ó-)‚úß

Ôºèl„ÄÅ
ÔºàÔæüÔΩ§ ÔΩ° Ôºó
l„ÄÅ ~„ÉΩ
„Åò„Åóf_, )„Éé


This is a visual presence, not an icon.

Buddy Visibility Rules:

Appears ONLY in Flow Mode

Completely disappears outside Flow Mode

No leftover space when hidden

üìç USER-SELECTABLE BUDDY POSITIONS (MANDATORY)

The user MUST be able to choose ONE of THREE placements:

1Ô∏è‚É£ LEFT SPLIT

Buddy occupies left side of terminal

Flow content remains on right

2Ô∏è‚É£ RIGHT SPLIT

Buddy occupies right side

Flow content remains on left

3Ô∏è‚É£ INLINE MODE

Buddy renders in unused/empty space

Does NOT resize panels

Feels embedded, not dominant

‚ö†Ô∏è This choice MUST:

Be respected immediately

Persist in config

Restore correctly on restart

üéõÔ∏è CONTROLS (MUST WORK)
Keybinding:

b ‚Üí Toggle Focus Buddy ON / OFF

Command Palette Entries (ADD, DO NOT REPLACE):

Toggle Focus Buddy

Buddy Position ‚Üí Left

Buddy Position ‚Üí Right

Buddy Position ‚Üí Inline

‚ö†Ô∏è If buddy is OFF:

No rendering

No layout changes

üß† BEHAVIOR (SUBTLE, NOT CHAT)

No chatbot behavior

No constant messages

Messages limited to:

"Begin."

"Stay."

"Done."

Message appears briefly, then fades / clears

üß± TECHNICAL CONSTRAINTS (IMPORTANT)

Use existing layout system

No widget duplication

No hardcoded terminal sizes

Use CSS classes for visibility & placement

Keep Replit run command intact

Do NOT remove existing commands or settings

‚úÖ FINAL VERIFICATION CHECKLIST (MANDATORY)

Before you claim completion, verify:

Command palette search works

Old palette entries are visible again

Buddy toggles ON/OFF correctly

Buddy placement changes immediately

Buddy disappears outside Flow Mode

Flow Mode exit fully restores UI

No panels missing or duplicated

‚ùå If ANY of the above fails ‚Üí DO NOT CLAIM SUCCESS.

üì¶ PACKAGING

Do NOT deploy

Do NOT publish

Mark status as:
PREPARED

üì§ FINAL RESPONSE FORMAT (STRICT)

After implementation, respond with:

What was restored

What was added (Focus Buddy only)

Any known limitations

Pip status: PREPARED

No marketing language. No exaggeration.